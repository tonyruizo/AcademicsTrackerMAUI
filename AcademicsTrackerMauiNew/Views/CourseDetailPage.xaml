<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="AcademicsTrackerMauiNew.Views.CourseDetailPage"
             xmlns:m="clr-namespace:AcademicsTrackerMauiNew.Models"
             Title="Course Details">
    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="10">
            <Label x:Name="CourseTitleLabel" FontSize="20" />
            <Label x:Name="CourseDatesLabel"/>
            <Label x:Name="StatusLabel" />
            <Label x:Name="InstructorLabel" />
            <Label x:Name="AssessmentCountLabel" FontAttributes="Bold" Padding="0, 15, 0, 0"/>
            <VerticalStackLayout BackgroundColor="#f2e9fd">
                <CollectionView x:Name="AssessmentsView"
                    VerticalOptions="Fill">
                    <CollectionView.ItemTemplate>
                        <DataTemplate x:DataType="m:Assessment">
                            <Grid Padding="15"
                              ColumnDefinitions="2*,2*,auto,auto"
                              RowDefinitions="*,Auto,Auto,Auto"
                              BackgroundColor="#f2e9fd"
                              Margin="0,0,0,8">
                                <!-- Assessment Title -->
                                <Label Grid.Row="0" Grid.ColumnSpan="4"
                                   Text="{Binding Title}"
                                   FontAttributes="Bold" />

                                <!-- Assessment Type & Due Date -->
                                <Label Grid.Row="1" Grid.Column="0" Padding="0,10,0,10"
                                   Text="{Binding Type, StringFormat='Type: {0}'}" />
                                <Label Grid.Row="2" Grid.Column="1" Padding="0,0,0,10"
                                   Text="{Binding EndDate, StringFormat='Due: {0:d}'}" 
                                   HorizontalOptions="End" />
                                <!-- Assessment Start Date -->
                                <Label Grid.Row="2" Grid.Column="0" Padding="0,0,0,10"
                                   Text="{Binding StartDate, StringFormat='Start: {0:d}'}" />

                                <!-- Assessment Buttons -->
                                <Button Grid.Row="3" Grid.Column="0" Margin="0,0,10,0"
                                    Text="Edit" 
                                    Clicked="OnEditAssessment" />
                                <Button Grid.Row="3" Grid.Column="1" Margin="0,0,10,0"
                                    Text="Alerts" 
                                    Clicked="OnAssessmentAlerts" />
                                <Button Grid.Row="3" Grid.Column="3"
                                    Text="Delete" 
                                    Clicked="OnDeleteAssessment" />
                            </Grid>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </VerticalStackLayout>
            <Button x:Name="AddAssessmentButton" Text="Add Assessment" Clicked="OnAddAssessmentClicked" Margin="0, 20, 0, 0"  />
            <Button Text="Notes" Clicked="OnNotesClicked" />
            <Button Text="Course Alerts" Clicked="OnAlertsClicked" />
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>